from collections import deque
# Our class......
 def get_neighbors(self, u, representation):
            if representation == 'list':
                return self.adj_list.get(u, [])
            elif representation == 'matrix':
                neighbors = []
                for i in range(self.n):
                    if self.adj_matrix[u][i] == 1:
                        neighbors.append(i)
                return neighbors
        def bfs_search(self,start, representation='list'):
            if start not in range(self.n):
                return set()
            gueue = deque([start])
            visited = {start}
            while gueue:
                u = gueue.popleft()
                for i in get_neighbors(u,representation):
                    if i not in visited:
                        visited.add(i)
                        gueue.append(i)
            return visited
          # --- ПОБУДОВА МАТРИЦІ ДОСЯЖНОСТІ ЧЕРЕЗ BFS ---
    def build_matrix_bfs(self, representation='list'):
        R = [[0] * self.n for _ in range(self.n)]
        for i in range(self.n):
            reachable_nodes = self.bfs_search(i, representation)
            for j in range(self.n):
                if j in reachable_nodes:
                    R[i][j] = 1
            return R
def print_matrix(matrix):
    print("Матриця досяжності:")
    for row in matrix:
        print(row)
        
n_size = 8
density = 0.5
g = Graph.random_graph_erdos_renyi(n_size, density)
# Дивимось текстовий вигляд
print("Список суміжності:", g.adj_list)
print(f"Тест BFS  {n_size} вершин (Щільність: {density})")
print("\nТест досяжності з вершини 0 (Список):", g.bfs_search(0, 'list'))
reach_matrix_list = g.build_matrix_bfs(representation='list')
print("\nРЕЗУЛЬТАТ (Побудовано через Списки суміжності):")
print_matrix(reach_matrix_list)
reach_matrix_matrix = g.build_matrix_bfs(representation='matrix')
print("\nРЕЗУЛЬТАТ (Побудовано через Матрицю суміжності):")
print_matrix(reach_matrix_matrix)
# Дивимось картинку
g.visualize()
